plugins {
  id 'java'
}

sourceCompatibility = '16'
targetCompatibility = '16'
version = '2.0'

dependencies {
  implementation fileTree( dir: 'library', include: '**/*.jar', exclude: '**/*-source.jar' )

  testImplementation 'junit:junit:4.12'
}

repositories {
  mavenCentral()
}

[compileJava, compileTestJava].each {
  it.options.encoding = 'UTF-8'
  it.options.compilerArgs += [ '-Xlint:unchecked', '-Xlint:deprecation' ]
}

javadoc.options.encoding = 'UTF-8'
javadoc.options.addStringOption('Xdoclint:none', '-quiet')

sourceSets {
  main {
    java {
      srcDirs = [ 'src' ]
    }
  }
}

test {
  useJUnit()
}

clean.doFirst {
  delete file( new File( rootDir, 'bin' ) )
  delete file( new File( rootDir, 'precomp_data' ) )
  delete file( new File( rootDir, 'test-results' ) )
}

task launch(type: JavaExec) {
  classpath = sourceSets.main.runtimeClasspath
  mainClass = 'adf.Main'
  maxHeapSize = '2048m'
}